### 错误页面统一配置（单独提取）
# 映射所有 4xx/5xx 错误到 @error_pages 处理
error_page 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 421 422 423 424 425 426 428 429 431 451 @error_pages;
error_page 500 501 502 503 504 505 506 507 508 510 511 @error_pages;

# 反向代理到 error-pages 容器处理
location @error_pages {
    # 传递原始错误码给 error-pages 容器（必须，否则默认显示 404）
    proxy_set_header X-Original-Status-Code $status;
    # 代理到 error-pages 容器（内部端口固定为 8080，容器名需与 Docker Compose 中一致）
    proxy_pass http://error-pages:8080;
    # 禁用重定向修改
    proxy_redirect off;
    # 传递原始请求的 Host 和客户端 IP
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

 ### 同样引入错误页面配置，实现统一风格 server
#include /etc/nginx/conf.d/errors.conf;