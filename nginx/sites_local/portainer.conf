# Portainer 容器管理器配置 - 无Authelia保护
server {
    listen 80;
    server_name portainer.local;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl;
    server_name portainer.local;

    # 通用服务器配置
    include /etc/nginx/snippets/common-server.conf;

    # 限流保护
    limit_req zone=general burst=30 nodelay;

    location / {
        proxy_pass http://portainer:9000;
        include /etc/nginx/snippets/proxy-persistent.conf;
    }

    # WebSocket支持 - Portainer需要
    location /api/websocket/ {
        proxy_pass http://portainer:9000;
        include /etc/nginx/snippets/proxy-persistent.conf;
    }
}
