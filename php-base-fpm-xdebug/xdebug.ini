; ============================================================================
; Xdebug 调试配置
; PHP 8.4 兼容版本
; ============================================================================

; 启用 Xdebug 扩展
; zend_extension=xdebug.so

; ============================================================================
; 调试模式配置
; ============================================================================

; 启用调试模式
xdebug.mode=debug

; 调试启动方式：通过触发启动（更安全，推荐）
xdebug.start_with_request=trigger

; 调试器连接主机地址（Docker Desktop 环境）
xdebug.client_host=host.docker.internal

; 调试器连接端口（与 IDE 配置一致）
xdebug.client_port=9003

; IDE 密钥标识符
xdebug.idekey=PHPSTORM

; ============================================================================
; 性能优化配置
; ============================================================================

; 限制递归深度，防止内存溢出
xdebug.max_nesting_level=256

; 限制堆栈帧数量
xdebug.max_stack_frames=256

; 限制变量显示子项数量
xdebug.var_display_max_children=128

; 限制变量显示数据大小（KB）
xdebug.var_display_max_data=1024

; 限制变量显示深度
xdebug.var_display_max_depth=3

; ============================================================================
; 日志配置
; ============================================================================

; 调试日志文件路径
xdebug.log=/var/log/php/xdebug.log

; 日志级别：7=debug, 6=info, 5=notice, 4=warning, 3=error, 2=critical, 1=alert, 0=emergency
xdebug.log_level=7

; ============================================================================
; 其他优化配置
; ============================================================================

; 连接超时时间（毫秒）
xdebug.client_timeout=200

; 自动跟踪函数调用（可选，用于复杂调试）
; xdebug.auto_trace=0

; 收集函数调用参数（可选，增加内存使用）
; xdebug.collect_params=0

; 收集返回值（可选，增加内存使用）
; xdebug.collect_return=0
